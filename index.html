
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#contacting-the-api" class="toc-h2 toc-link" data-title="Contacting the API">Contacting the API</a>
                  </li>
                  <li>
                    <a href="#api-response" class="toc-h2 toc-link" data-title="API Response">API Response</a>
                  </li>
                  <li>
                    <a href="#running-the-client" class="toc-h2 toc-link" data-title="Running the Client">Running the Client</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#conclusion" class="toc-h1 toc-link" data-title="Conclusion">Conclusion</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://piratesonline.co/'>Return to main website.</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1><pre class="highlight python tab-python"><code><span class="c"># Due to the SSL on our API, you must use</span>
<span class="c"># Python 3 in order to make any API requests.</span>

<span class="c"># If you don't, you'll get this nasty error:</span>
<span class="c"># requests.exceptions.SSLError: [SSL: SSLV3_ALERT_HANDSHAKE_FAILURE] sslv3 alert handshake failure (_ssl.c:661)</span>
</code></pre>
<p>Welcome to The Legend of Pirates Online API!</p>

<p>You can use our API to access The Legend of Pirates Online API endpoints, which can get information on news, servers and system status.</p>

<p>All API requests must be made using <code>HTTPS</code>.</p>
<h1 id='authentication'>Authentication</h1>
<ul>
<li>Launcher POSTs a request to the API URL.

<ul>
<li><code>https://api.piratesonline.co/login/</code>.</li>
</ul></li>
<li>Web responds in one of multiple ways.</li>
<li>Launcher interprets web response and launches game if successful.

<ul>
<li>API will respond in JSON format.</li>
</ul></li>
</ul>
<h2 id='contacting-the-api'>Contacting the API</h2><h3 id='headers'>Headers</h3>
<p>All calls to the API should be made via a HTTP <code>POST</code> to <code>https://api.piratesonline.co/login/</code> using an urlencoded form.  To do this, add <code>&#39;Content-type&#39;: &#39;application/x-www-form-urlencoded&#39;</code> to your headers.</p>
<h3 id='parameters'>Parameters</h3>
<ul>
<li>For all practical uses, all API requests should be made using the general account parameters.</li>
<li>If the API responds with a request for a two-factor token, submit a new request containing the two-factor parameter.</li>
</ul>

<p>The following tables outline the required parameters for both cases:</p>
<h3 id='general-accounts'>General Accounts</h3><pre class="highlight python tab-python"><code><span class="c"># ** General Account Login **</span>

<span class="c"># https://pypi.python.org/pypi/requests</span>
<span class="kn">import</span> <span class="nn">requests</span> 
<span class="kn">import</span> <span class="nn">urllib</span>

<span class="n">params</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlencode</span><span class="p">({</span><span class="s">'username'</span><span class="p">:</span> <span class="s">'your_username_here'</span><span class="p">,</span>
                           <span class="s">'password'</span><span class="p">:</span> <span class="s">'your_password_here'</span><span class="p">})</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/x-www-form-urlencoded'</span><span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://api.piratesonline.co/login/'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<table><thead>
<tr>
<th>Params</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>The username of the account you desire to login to.</td>
</tr>
<tr>
<td>password</td>
<td>The password of the account you desire to login to.</td>
</tr>
</tbody></table>
<h3 id='account-with-two-factor-authentication'>Account with Two-factor Authentication</h3><pre class="highlight python tab-python"><code><span class="c"># ** 2FA Account Login **</span>

<span class="c"># https://pypi.python.org/pypi/requests</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">urllib</span>

<span class="n">params</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlencode</span><span class="p">({</span><span class="s">'username'</span> <span class="p">:</span> <span class="s">'your_username_here'</span><span class="p">,</span>
                           <span class="s">'password'</span> <span class="p">:</span> <span class="s">'your_password_here'</span><span class="p">,</span>
                           <span class="s">'gtoken'</span>   <span class="p">:</span> <span class="s">'your_2fa_token_here'</span><span class="p">})</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/x-www-form-urlencoded'</span><span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://api.piratesonline.co/login/'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</code></pre>
<table><thead>
<tr>
<th>Params</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>The username of the account you desire to login to.</td>
</tr>
<tr>
<td>password</td>
<td>The password of the account you desire to login to.</td>
</tr>
<tr>
<td>gtoken</td>
<td>The account&#39;s active two-factor authentication token.</td>
</tr>
</tbody></table>
<h2 id='api-response'>API Response</h2>
<p>The API will respond in one of 12 ways.</p>

<table><thead>
<tr>
<th>Response</th>
<th>Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>UnknownError</td>
<td>0</td>
<td>An unknown error has occurred.</td>
</tr>
<tr>
<td>Invalid ID/Pass</td>
<td>1</td>
<td>The submitted Username/Password was incorrect.</td>
</tr>
<tr>
<td>Server Error</td>
<td>2</td>
<td>A server error has occurred.</td>
</tr>
<tr>
<td>Two Step Required</td>
<td>3</td>
<td>This account has two-step authentication enabled.</td>
</tr>
<tr>
<td>Account Disabled</td>
<td>4</td>
<td>This account is banned or disabled.</td>
</tr>
<tr>
<td>Server Closed</td>
<td>5</td>
<td>The server is closed.</td>
</tr>
<tr>
<td>IP Blacklisted</td>
<td>6</td>
<td>This IP is banned.</td>
</tr>
<tr>
<td>Success</td>
<td>7</td>
<td>This account has successfully logged in.</td>
</tr>
<tr>
<td>Email Unverified</td>
<td>8</td>
<td>This account&#39;s email has not been verified.</td>
</tr>
<tr>
<td>No Playtime</td>
<td>9</td>
<td>This account does not have an active playtime.</td>
</tr>
<tr>
<td>Rate Limited</td>
<td>10</td>
<td>This account is trying to log in too quickly.</td>
</tr>
<tr>
<td>Arrrmor</td>
<td>11</td>
<td>This account is logging in from an unknown location.</td>
</tr>
</tbody></table>
<h3 id='failure-responses'>Failure responses</h3>
<p>If any one of these responses are received, the login process has ended with an error. The launcher will notify the player that an error has occurred and prompt them with the reason.</p>
<pre class="highlight json tab-json"><code><span class="err">/*</span><span class="w"> </span><span class="err">ACTUAL</span><span class="w"> </span><span class="err">PROD</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">RESPONSES</span><span class="w"> </span><span class="err">*/</span><span class="w">

</span><span class="err">/*</span><span class="w"> </span><span class="err">INVALID</span><span class="w"> </span><span class="err">USERNAME/PASSWORD</span><span class="w"> </span><span class="err">*/</span><span class="w">
</span><span class="p">{</span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
 </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Incorrect username and/or password."</span><span class="p">}</span><span class="w">

</span><span class="err">/*</span><span class="w"> </span><span class="err">ACCOUNT</span><span class="w"> </span><span class="err">BANNED</span><span class="w"> </span><span class="err">*/</span><span class="w">
</span><span class="p">{</span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
 </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This account is on hold. Please login to www.piratesonline.co/account/banned_id/ for more information."</span><span class="p">}</span><span class="w">

</span><span class="err">/*</span><span class="w"> </span><span class="err">SERVER</span><span class="w"> </span><span class="err">CLOSED</span><span class="w"> </span><span class="err">*/</span><span class="w">
</span><span class="p">{</span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
 </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Legend of Pirates Online is currently closed for an update. We'll be back up soon!"</span><span class="p">}</span><span class="w">

</span><span class="err">/*</span><span class="w"> </span><span class="err">UNVERIFIED</span><span class="w"> </span><span class="err">EMAIL</span><span class="w"> </span><span class="err">*/</span><span class="w">
</span><span class="p">{</span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
 </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This account's email hasn't been verified yet. Please check yer email."</span><span class="p">}</span><span class="w">

</span><span class="err">/*</span><span class="w"> </span><span class="err">NO</span><span class="w"> </span><span class="err">ACTIVE</span><span class="w"> </span><span class="err">SESSION</span><span class="w"> </span><span class="err">(DEPRECATED)</span><span class="w"> </span><span class="err">*/</span><span class="w">
</span><span class="p">{</span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
 </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ye do not have an active session right now.  Ye can sign up for one on our website!"</span><span class="p">}</span><span class="w">

</span><span class="err">/*</span><span class="w"> </span><span class="err">RATE</span><span class="w"> </span><span class="err">LIMITED</span><span class="w"> </span><span class="err">*/</span><span class="w">
</span><span class="p">{</span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
 </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ye are trying to login too fast.  Please try again in one minute."</span><span class="p">}</span><span class="w">

</span><span class="err">/*</span><span class="w"> </span><span class="err">ARRMOR</span><span class="w"> </span><span class="err">*/</span><span class="w">
</span><span class="p">{</span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
 </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ye are trying to login from a new location. Please check yer email."</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='status-1-invalid-username-password'>Status 1: Invalid username/password</h3>
<p>The submitted Username/Password was incorrect.</p>
<h3 id='status-4-account-banned'>Status 4: Account Banned</h3>
<p>This account is banned or disabled.</p>
<h3 id='status-5-server-closed'>Status 5: Server Closed</h3>
<p>The servers are currently closed for an update.</p>
<h3 id='status-8-email-unverified'>Status 8: Email Unverified</h3>
<p>This account&#39;s email hasn&#39;t been verified yet.</p>
<h3 id='status-9-no-active-playtime'>Status 9: No Active Playtime</h3>
<p><strong>Deprecated</strong> No active playtime for the account.</p>
<h3 id='status-10-rate-limited'>Status 10: Rate Limited</h3>
<p>If an account sends too many login requests over a period of time.</p>
<h3 id='status-11-arrrmor'>Status 11: Arrrmor</h3>
<p>Two-step security for geolocation</p>
<h3 id='successful-responses'>Successful responses</h3><h3 id='partial-success-two-step-required'>Partial-success: Two-Step Required</h3><pre class="highlight json tab-json"><code><span class="err">/*</span><span class="w"> </span><span class="err">PARTIALLY</span><span class="w"> </span><span class="err">SUCCESSFUL</span><span class="w"> </span><span class="err">LOGIN</span><span class="w"> </span><span class="err">*/</span><span class="w">
</span><span class="p">{</span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w"> </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A two-factor authentication code is required to login."</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You must send another request to the login API containing the user-supplied authentication token using the <code>gtoken</code> parameter.  If this token is invalid and/or expired, you will receive another partial-success login.  You must send the username and password again when sending this follow-up request.</p>
<h3 id='successful-login'>Successful Login</h3><pre class="highlight json tab-json"><code><span class="err">/*</span><span class="w"> </span><span class="err">SUCCESSFUL</span><span class="w"> </span><span class="err">LOGIN</span><span class="w"> </span><span class="err">*/</span><span class="w">
</span><span class="p">{</span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7"</span><span class="p">,</span><span class="w"> </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Have fun!"</span><span class="p">,</span><span class="w"> </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678abcdefgh"</span><span class="p">,</span><span class="w"> </span><span class="s2">"gameserver"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prod-gs-protected-agent-1.legendofpiratesonline.com"</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>You have successfully authenticated with the API.</p>

<p>You have received the following API response and are now able to run the client using the <code>token</code> and <code>gameserver</code> provided.</p>
<h2 id='running-the-client'>Running the Client</h2>
<p>Upon receiving a status 7 response, you will have all of the proper information you need to login on the client.</p>

<p>To login on the client, set the following environment variables containing the information provided by the login API and then run the client.</p>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">'TLOPO_GAMESERVER'</span><span class="p">]</span> <span class="o">=</span> <span class="n">url_from_server</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">'TLOPO_PLAYCOOKIE'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cookie_from_server</span>

<span class="c"># Open client here.</span>
</code></pre>
<table><thead>
<tr>
<th>Environment Variable</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>TLOPO_GAMESERVER</td>
<td>The gameserver provided by the API.</td>
</tr>
<tr>
<td>TLOPO_PLAYCOOKIE</td>
<td>The token provided by the API.</td>
</tr>
</tbody></table>
<h1 id='conclusion'>Conclusion</h1>
<p>Do you have a suggestion for an API?  Send us an email at <a href="mailto:support@piratesonline.co">support@piratesonline.co</a></p>

<p>Would you like to make a contribution to our API doc?  <a href="https://github.com/TheLegendofPiratesOnline/documentation/">Check us out on GitHub</a>!</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
